(function(e){function t(t){for(var i,s,r=t[0],l=t[1],d=t[2],u=0,h=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&h.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);c&&c(t);while(h.length)h.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={app:0},a=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/midi-vue/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=n("ad3d"),a=n("ecee"),s=n("c074"),r=n("f2d1"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"player"}},[n("div",{attrs:{id:"about"}},[n("h1",{style:{"margin-top":"0px"}},[n("a",{attrs:{href:"/"}},[e._v("Play Piano Online")])]),n("label",[e._v("About The Author")]),n("div",{attrs:{id:"icon-container"}},[n("a",{attrs:{target:"_blank",href:"https://github.com/Grkmus"}},[n("font-awesome-icon",{attrs:{icon:["fab","github"],size:"2x"}})],1),n("a",{attrs:{target:"_blank",href:"https://twitter.com/tosungo"}},[n("font-awesome-icon",{attrs:{icon:["fab","twitter"],size:"2x"}})],1),n("a",{attrs:{target:"_blank",href:"https://www.instagram.com/tosungo/"}},[n("font-awesome-icon",{attrs:{icon:["fab","instagram"],size:"2x"}})],1),n("a",{attrs:{target:"_blank",href:"https://gorkemtosun.com/"}},[n("font-awesome-icon",{attrs:{icon:["fa","globe"],size:"2x"}})],1)])]),n("div",{attrs:{id:"player-options"}},[n("div",{staticClass:"module"},[n("h3",{staticClass:"panel-header"},[e._v("Song")]),n("div",{staticClass:"panel"},[n("div",{staticClass:"container"},[n("label",{attrs:{for:"filereader"}},[e._v(" Chose a midi file")]),n("input",{ref:"filereader",staticStyle:{width:"140px"},attrs:{id:"filereader",type:"file",name:"filereader"},on:{change:e.readFile}})]),n("div",{staticClass:"container"},[n("label",{attrs:{for:"songs"}},[e._v("Or pick a predefined song:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedSong,expression:"selectedSong"}],attrs:{id:"songs",name:"songs"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedSong=t.target.multiple?n:n[0]}}},[n("option",{attrs:{label:"Canon in D",value:"Canon in D"}}),n("option",{attrs:{label:"Mozart - Rondo Alla Turca",value:"Mozart - Rondo Alla Turca"}})])])])]),n("div",{staticClass:"module"},[n("h3",{staticClass:"panel-header"},[e._v("Player")]),n("div",{staticClass:"panel"},[n("font-awesome-icon",{attrs:{icon:"step-backward",size:"2x"}}),e.isPlaying?n("font-awesome-icon",{attrs:{icon:"pause",size:"2x"},on:{click:function(t){e.isPlaying=!1}}}):n("font-awesome-icon",{attrs:{icon:"play",size:"2x"},on:{click:function(t){e.isPlaying=!0}}}),n("font-awesome-icon",{attrs:{icon:"stop",size:"2x"},on:{click:e.stop}}),n("font-awesome-icon",{attrs:{icon:"step-forward",size:"2x"}})],1),n("span",{staticClass:"truncate"},[e._v("Current Song: "+e._s(e.fileName||e.selectedSong))])]),n("div",{staticClass:"module"},[n("h3",{staticClass:"panel-header"},[e._v("Mods")]),n("div",{staticClass:"panel"},[n("label",{attrs:{for:"play-along"}},[e._v("Play along")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],attrs:{id:"play-along",type:"radio",name:"mode",value:"playAlong"},domProps:{checked:e._q(e.mode,"playAlong")},on:{change:function(t){e.mode="playAlong"}}}),n("label",{attrs:{for:"wait-input"}},[e._v("Wait for input")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.mode,expression:"mode"}],attrs:{id:"wait-input",type:"radio",name:"mode",value:"waitInput"},domProps:{checked:e._q(e.mode,"waitInput")},on:{change:function(t){e.mode="waitInput"}}}),n("label",{attrs:{for:"left-hand"}},[e._v("Left Hand")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.leftHandEnabled,expression:"leftHandEnabled"}],attrs:{id:"left-hand",type:"checkbox",name:"left-hand",value:"leftHand"},domProps:{checked:Array.isArray(e.leftHandEnabled)?e._i(e.leftHandEnabled,"leftHand")>-1:e.leftHandEnabled},on:{change:function(t){var n=e.leftHandEnabled,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a="leftHand",s=e._i(n,a);i.checked?s<0&&(e.leftHandEnabled=n.concat([a])):s>-1&&(e.leftHandEnabled=n.slice(0,s).concat(n.slice(s+1)))}else e.leftHandEnabled=o}}}),n("label",{attrs:{for:"right-hand"}},[e._v("Right Hand")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rightHandEnabled,expression:"rightHandEnabled"}],attrs:{id:"right-hand",type:"checkbox",name:"left-hand",value:"rightHand"},domProps:{checked:Array.isArray(e.rightHandEnabled)?e._i(e.rightHandEnabled,"rightHand")>-1:e.rightHandEnabled},on:{change:function(t){var n=e.rightHandEnabled,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a="rightHand",s=e._i(n,a);i.checked?s<0&&(e.rightHandEnabled=n.concat([a])):s>-1&&(e.rightHandEnabled=n.slice(0,s).concat(n.slice(s+1)))}else e.rightHandEnabled=o}}})])]),n("div",{staticClass:"module"},[n("h3",{staticClass:"panel-header"},[e._v("Tempo")]),n("div",{staticClass:"panel"},[n("label",{attrs:{for:"volume"}},[e._v(e._s(e.bpm)+"bpm")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rawBpm,expression:"rawBpm"}],attrs:{id:"tempo",type:"range",name:"tempo",min:"1",max:"240",step:"1"},domProps:{value:e.rawBpm},on:{__r:function(t){e.rawBpm=t.target.value}}})])]),n("div",{staticClass:"module"},[n("h3",{staticClass:"panel-header"},[e._v("Looping")]),n("div",{staticClass:"panel"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.loopEnabled,expression:"loopEnabled"}],attrs:{id:"looping",type:"checkbox",name:"looping",min:"1",max:"240",step:"1"},domProps:{checked:Array.isArray(e.loopEnabled)?e._i(e.loopEnabled,null)>-1:e.loopEnabled},on:{change:function(t){var n=e.loopEnabled,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=null,s=e._i(n,a);i.checked?s<0&&(e.loopEnabled=n.concat([a])):s>-1&&(e.loopEnabled=n.slice(0,s).concat(n.slice(s+1)))}else e.loopEnabled=o}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rawLoopStart,expression:"rawLoopStart"}],staticStyle:{width:"50px"},attrs:{id:"loop-start",type:"number",name:"loop-start",step:"1000",disabled:!e.loopEnabled},domProps:{value:e.rawLoopStart},on:{input:function(t){t.target.composing||(e.rawLoopStart=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rawLoopEnd,expression:"rawLoopEnd"}],staticStyle:{width:"50px"},attrs:{id:"loop-end",type:"number",name:"loop-end",step:"1000",disabled:!e.loopEnabled},domProps:{value:e.rawLoopEnd},on:{input:function(t){t.target.composing||(e.rawLoopEnd=t.target.value)}}})])]),n("div",{staticClass:"module"},[n("h3",{staticClass:"panel-header"},[e._v("Midi Input")]),n("div",{staticClass:"panel"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedInput,expression:"selectedInput"}],attrs:{id:"songs",name:"songs"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedInput=t.target.multiple?n:n[0]}}},e._l(e.availableInputs,(function(t){return n("option",{key:t,domProps:{value:t,innerHTML:e._s(t)}})})),0)])])])]),n("div",{attrs:{id:"sheet"}},[n("runner",{ref:"runner",attrs:{midiJson:e.midiJson,height:e.sheetHeight,width:e.sheetWidth,keyWidth:e.keyWidth,isPlaying:e.isPlaying,bpm:e.bpm,mode:e.mode,loopEnabled:e.loopEnabled,loopStart:e.loopStart,loopEnd:e.loopEnd,leftHandEnabled:e.leftHandEnabled,rightHandEnabled:e.rightHandEnabled,"midi-device":e.midiDevice},on:{pause:function(t){e.isPlaying=!1}}})],1),n("div",{attrs:{id:"keyboard"}},e._l(e.octaveAmount,(function(t){return n("octave",{key:t,ref:t,refInFor:!0,attrs:{octaveWidth:e.octaveWidth,octave:t,keyWidth:e.keyWidth}})})),1)])},d=[],c=(n("7db0"),n("d81d"),n("b0c0"),n("a9e3"),n("d3b7"),n("ac1f"),n("1276"),n("c62b")),u=n.n(c),h=n("ef75"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"octave",style:{width:e.octaveWidth+"px"}},[n("div",{staticClass:"white-keys"},[n("white-key",{key:"C",ref:"C",style:{width:e.whiteKeyWidth+"px"},attrs:{note:"C",midiNumber:12*e.octave+1}}),n("white-key",{key:"D",ref:"D",style:{width:e.whiteKeyWidth+"px"},attrs:{note:"D",midiNumber:12*e.octave+2}}),n("white-key",{key:"E",ref:"E",style:{width:e.whiteKeyWidth+"px"},attrs:{note:"E",midiNumber:12*e.octave+3}}),n("white-key",{key:"F",ref:"F",style:{width:e.whiteKeyWidth+"px"},attrs:{note:"F",midiNumber:12*e.octave+4}}),n("white-key",{key:"G",ref:"G",style:{width:e.whiteKeyWidth+"px"},attrs:{note:"G",midiNumber:12*e.octave+5}}),n("white-key",{key:"A",ref:"A",style:{width:e.whiteKeyWidth+"px"},attrs:{note:"A",midiNumber:12*e.octave+6}}),n("white-key",{key:"B",ref:"B",style:{width:e.whiteKeyWidth+"px"},attrs:{note:"B",midiNumber:12*e.octave+7}})],1),n("div",{staticClass:"black-keys"},[n("black-key",{key:"C#",ref:"C#",style:{width:e.keyWidth+"px",left:2+e.keyWidth+"px"},attrs:{note:"C#"}}),n("black-key",{key:"D#",ref:"D#",style:{width:e.keyWidth+"px",left:4+3*e.keyWidth+"px"},attrs:{note:"D#"}}),n("black-key",{key:"F#",ref:"F#",style:{width:e.keyWidth+"px",left:6+6*e.keyWidth+"px"},attrs:{note:"F#"}}),n("black-key",{key:"G#",ref:"G#",style:{width:e.keyWidth+"px",left:4+8*e.keyWidth+"px"},attrs:{note:"G#"}}),n("black-key",{key:"A#",ref:"A#",style:{width:e.keyWidth+"px",left:10*e.keyWidth+"px"},attrs:{note:"A#"}})],1)])},f=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"white-key",class:{pressed:e.currentVelocity},style:{"background-color":e.keyColor}},[n("span",[e._v(e._s(e.note))])])},y=[],v=n("4a96"),b=n("ce6b"),g=n("166a"),k={name:"WhiteKey",props:{velocity:Number,note:String,midiNumber:Number},data:function(){return{currentVelocity:0,keyColor:"white"}},mounted:function(){this.$root.$on("reset",this.releaseKey),this.colorScale=Object(b["a"])().domain([13,91]).interpolator(v["a"]),this.keyColor=Object(g["a"])(this.colorScale(this.midiNumber))},methods:{pressKey:function(e){this.currentVelocity=e},releaseKey:function(){this.currentVelocity=0}}},w=k,E=(n("85db"),n("2877")),N=Object(E["a"])(w,m,y,!1,null,"a7995684",null),x=N.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"black-key",class:{pressed:e.currentVelocity}},[n("span",[e._v(e._s(e.note))])])},S=[],A={name:"BlackKey",props:{velocity:Number,note:String},data:function(){return{currentVelocity:0}},mounted:function(){this.$root.$on("reset",this.releaseKey)},methods:{pressKey:function(e){this.currentVelocity=e},releaseKey:function(){this.currentVelocity=0}}},C=A,P=(n("7113"),Object(E["a"])(C,_,S,!1,null,"1f5cdd4d",null)),H=P.exports,O={components:{WhiteKey:x,BlackKey:H},name:"Octave",props:{keyWidth:Number,octaveWidth:Number,octave:Number},computed:{whiteKeyWidth:function(){return 2*this.keyWidth}},mounted:function(){console.log(this.octave)}},W=O,$=(n("baa1"),Object(E["a"])(W,p,f,!1,null,null,null)),K=$.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"canvas"}})},L=[],M=(n("99af"),n("cb29"),n("4de4"),n("4160"),n("a434"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("2909")),T=n("3425"),D=n.n(T),F=n("af81"),I=n("2ef0"),j=n.n(I),z={name:"Runner",props:{width:null,height:null,keyWidth:null,midiJson:null,isPlaying:Boolean,bpm:Number,mode:String,loopEnabled:Boolean,loopStart:Number,loopEnd:Number,leftHandEnabled:Boolean,rightHandEnabled:Boolean,midiDevice:Object},data:function(){return this.cachedNotes=null,{keys:{},lowestKey:24,isKeyPressed:!1,isKeyBeingPressed:!1,sketch:null,standardQuarterNoteHeight:240,notes:[],position:0,deltaTime:0,keysToBePressed:new Set,bpmScaler:1,colorScale:void 0}},mounted:function(){var e=this;console.log(v["a"]),console.log(b["a"]),this.colorScale=Object(b["a"])().domain([24,107]).interpolator(v["a"]),document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),window.addEventListener("load",(function(){console.log("page is fully loaded"),e.sketchIt(),e.createKeys()})),this.$parent.$on("stop",this.stop),this.initializePianoSamples()},computed:{green:function(){return[52,206,77]},darkGreen:function(){return[50,117,61]},red:function(){return[245,22,22]},darkRed:function(){return[128,38,38]},blue:function(){return[3,132,252]},darkBlue:function(){return[59,96,133]},gray:function(){return[138,138,138]},keyTriggerLocation:function(){return this.height-this.bpm2px},rawAllNotes:function(){var e;return j.a.flatMapDeep(null===(e=this.midiJson)||void 0===e?void 0:e.tracks,(function(e){return[e.notes]}))},minimumMeasure:function(){var e;return 20*Math.ceil((null===(e=j.a.minBy(this.rawAllNotes,(function(e){return null===e||void 0===e?void 0:e.durationTicks})))||void 0===e?void 0:e.durationTicks)/20)},divisionRate:function(){var e;return this.standardQuarterNoteHeight/(null===(e=this.midiJson)||void 0===e?void 0:e.header.ppq)},bpm2px:function(){return 4*this.bpm/(1e3/this.deltaTime)},positionAdder:function(){return this.bpm2px*this.bpmScaler}},watch:{midiDevice:function(){var e=this;this.midiDevice.addListener("noteon","all",(function(t){console.log(t);var n=t.note;e.$set(e.keys,n.number,!0),e.keysToBePressed.delete(n.number),e.keysToBePressed.size||"waitInput"!==e.mode||(e.$parent.isPlaying=!0),e.noteOn(n)})),this.midiDevice.addListener("noteoff","all",(function(t){console.log(t);var n=t.note;e.$set(e.keys,n.number,!1),e.noteOff(n)}))},isKeyPressed:function(e){console.log("isKeypressed"),console.log(e)},isKeyBeingPressed:function(e){console.log("isKeyBeingPressed"),console.log(e)},loopEnabled:function(e){var t=this;e?this.setupForLoop():(this.$set(this,"notes",this.cachedNotes.filter((function(e){return Math.abs(e.position)>t.position-t.height}))),this.resetNoteState())},loopStart:function(){this.setupForLoop()},loopEnd:function(){this.setupForLoop()},isPlaying:function(e){this.bpmScaler=e?1:0},mode:function(e){"playAlong"===e&&this.keysToBePressed.clear()}},methods:{initializePianoSamples:function(){this.piano=new F["a"]({velocities:2}),this.piano.toDestination(),this.piano.output.gain.value=.5,this.piano.load().then((function(){console.log("loaded!")}))},createKeys:function(){for(var e=this.lowestKey;e<108;e+=1)this.$set(this.keys,e,!1)},pickMode:function(e,t){"waitInput"===this.mode&&(e.isOpen=!0,this.keysToBePressed.add(e.number),console.log(this.keysToBePressed),this.pressKeyComponent(e.octave,e.name),this.$emit("pause")),"playAlong"===this.mode&&(e.isOpen=!0,this.$set(this.notes,t,e),this.noteOn(e,t),console.log("note started",e,t))},drawNotes:function(){for(var e=this.notes.length-1;e>=0;e-=1){var t=this.notes[e];this.sketch.fill(this.gray),this.leftHandEnabled&&"left"===t.hand&&this.sketch.fill(t.color),this.rightHandEnabled&&"right"===t.hand&&this.sketch.fill(t.color),t.show(),t.isNoteStart()&&!t.isOpen&&(console.log("fill with "),t.color=this.darkBlue,this.leftHandEnabled&&"left"===t.hand&&this.pickMode(t,e),this.rightHandEnabled&&"right"===t.hand&&this.pickMode(t,e)),t.isNoteEnd()&&(t.isOpen=!1,this.notes.splice(e,1),this.noteOff(t,e),console.log("note ended",t,e))}},noteOn:function(e){console.log("Note ON: ",e),this.piano.keyDown({midi:e.number}),this.pressKeyComponent(e.octave,e.name)},noteOff:function(e){console.log("Note OFF: ",e),this.piano.keyUp({midi:e.number}),this.releaseKeyComponent(e.octave,e.name)},stop:function(){this.position=0,this.$set(this,"notes",j.a.cloneDeep(this.cachedNotes)),this.resetNoteState()},resetNoteState:function(){var e=this;this.piano.stopAll(),this.notes.forEach((function(t){t.isOpen=!1,t.color=e.pickColor(t.hand,t.name)})),this.$root.$emit("reset")},loopInArea:function(){this.position>=this.loopEnd+this.height&&this.setupForLoop()},setupForLoop:function(){var e=this;this.$set(this,"notes",this.cachedNotes.filter((function(t){return Math.abs(t.position)>e.loopStart&&Math.abs(t.position)<e.loopEnd}))),this.resetNoteState(),this.position=this.loopStart+this.height},parseMidi:function(){var e=this;this.position=0,this.$set(this,"notes",[]),this.resetNoteState(),this.midiJson.tracks.forEach((function(t,n){console.log("parsing tracks.."),t.notes.forEach((function(t){console.log("parsing notes..");var i=t.midi,o=t.durationTicks,a=t.ticks,s=t.octave,r=t.pitch,l=-o*e.divisionRate,d=-a*e.divisionRate,c=e.getOffset(t),u=[(i-e.lowestKey)*e.keyWidth+c,d,e.keyWidth,l],h=u[0],p=u[1],f=u[2],m=u[3],y=1===n?"left":"right";e.notes.push({hand:y,number:i,octave:s,name:r,color:e.pickColor(i),velocity:0,isOpen:!1,position:p,show:function(){return e.sketch.rect(h,p,f,m,5)},isNoteStart:function(){return e.height<=p+e.position},isNoteEnd:function(){return e.keyTriggerLocation<=p+m+e.position}})})),e.cachedNotes=j.a.cloneDeep(e.notes)}))},getOffset:function(e){var t={"C#":2,"D#":4,"F#":6,"G#":4,G:5,A:3,E:3,F:5,D:5};return j.a.get(t,e.pitch,0)},pickColor:function(e){var t=Object(g["a"])(this.colorScale(e)),n=t.r,i=t.g,o=t.b;return[n,i,o]},pressKeyComponent:function(e,t){this.$parent.$refs[e][0].$refs[t].pressKey(55)},releaseKeyComponent:function(e,t){this.$parent.$refs[e][0].$refs[t].releaseKey()},sketchIt:function(){var e=this,t=function(t){t.effectGenerator=function(n,i){var o=0,a=e.keyWidth,s=e.height,r=e.darkBlue;return function(e){o<a-10&&(t.rectMode(t.CORNERS),t.fill.apply(t,Object(M["a"])(r).concat([100])),t.rect(n+o,0-e,n-o,s-e),t.rectMode(t.CORNER),o+=i)}},t.setup=function(){t.createCanvas(e.width,e.height)},t.draw=function(){t.background(33,33,33),t.translate(0,e.position),e.loopEnabled&&e.loopInArea(),e.drawNotes(t),e.isPlaying&&(e.deltaTime=t.deltaTime,e.position+=e.positionAdder),t.textSize(32),t.fill(255),t.text(Math.round(e.position)-e.height,30,60-e.position)},e.sketch=t};new D.a(t,"canvas")}}},R=z,J=Object(E["a"])(R,B,L,!1,null,null,null),G=J.exports,V={name:"App",components:{Octave:K,Runner:G},data:function(){return{reader:new FileReader,sheetHeight:null,sheetWidth:null,midiJson:null,rawFileName:null,octaveAmount:7,isPlaying:!1,rawBpm:120,mode:"playAlong",loopEnabled:!1,rawLoopStart:2e3,rawLoopEnd:3e3,publicPath:"/midi-vue/",predefinedSongs:[],selectedSong:"Mozart - Rondo Alla Turca",leftHandEnabled:!0,rightHandEnabled:!0,selectedInput:null,availableInputs:null,midiDevice:null}},mounted:function(){var e=this;u.a.enable((function(){console.log(u.a.inputs),console.log(u.a.outputs),e.availableInputs=u.a.inputs.map((function(e){return e.name})),e.selectedInput=e.availableInputs[0]})),this.sheetHeight=this.$el.querySelector("#sheet").offsetHeight,this.sheetWidth=this.$el.querySelector("#sheet").offsetWidth,this.reader.addEventListener("onerror",(function(e){console.log("load different.",e)})),this.reader.addEventListener("load",(function(t){console.log("reading file",t.target.result),e.midiJson=new h["Midi"](t.target.result),e.rawBpm=e.midiJson.header.tempos[0].bpm})),this.reader.addEventListener("loadend",(function(){console.log("Loaded midi file: ",e.midiJson),e.$refs.runner.parseMidi()})),fetch("".concat(this.publicPath,"MozartWolfgangAmadeus_AllaTurcaRondo.midi")).then((function(e){return e.blob()})).then((function(t){e.reader.readAsArrayBuffer(t),e.predefinedSongs.push({name:"Mozart - Rondo Alla Turca",blob:t})})),fetch("".concat(this.publicPath,"Canon_in_D.mid")).then((function(e){return e.blob()})).then((function(t){e.predefinedSongs.push({name:"Canon in D",blob:t})}))},watch:{selectedSong:function(e){this.reader.readAsArrayBuffer(this.predefinedSongs.find((function(t){return t.name===e})).blob),this.$refs.filereader.value="",this.rawFileName=""},mode:function(e){"playAlong"===e&&(this.isPlaying=!0)},selectedInput:function(e){this.midiDevice=u.a.getInputByName(e)}},computed:{octaveWidth:function(){return this.sheetWidth/this.octaveAmount},keyWidth:function(){return this.octaveWidth/12},bpm:function(){return Math.round(Number(this.rawBpm))},loopStart:function(){return Number(this.rawLoopStart)},loopEnd:function(){return Number(this.rawLoopEnd)},fileName:function(){var e;return null===(e=this.rawFileName)||void 0===e?void 0:e.split(".")[0]}},methods:{readFile:function(){this.isPlaying=!1,this.reader.readAsArrayBuffer(this.$refs.filereader.files[0]),this.rawFileName=this.$refs.filereader.files[0].name},stop:function(){this.$refs.runner.stop(),this.isPlaying=!1}}},q=V,Q=(n("034f"),Object(E["a"])(q,l,d,!1,null,null,null)),U=Q.exports;a["c"].add(s["a"],r["a"]),i["a"].component("font-awesome-icon",o["a"]),i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(U)}}).$mount("#app")},"67b6":function(e,t,n){},7113:function(e,t,n){"use strict";n("8058")},8058:function(e,t,n){},"85db":function(e,t,n){"use strict";n("ac9e")},"85ec":function(e,t,n){},ac9e:function(e,t,n){},baa1:function(e,t,n){"use strict";n("67b6")}});
//# sourceMappingURL=app.26f28842.js.map